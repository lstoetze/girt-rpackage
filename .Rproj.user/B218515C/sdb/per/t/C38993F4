{
    "collab_server" : "",
    "contents" : "#' ---\n#' title: \"Whose Dimension is it anyway: CCES Legislator and Citzins Scaling\"\n#' author: \"Lukas F. Stoetzer\"\n#' ---\n\n#' Script estimates irt models for CCES Study\n\n  # Libraries\n  library(girt)\n\n  # Set values for mcmc\n  Niter <- 40000\n  Nburin <- 10000\n  Nthin <- 100\n  Nchains <- 4\n\n  # Start Time\n  start.time <- Sys.time()\n  \n# 1) CCES 08 ================\n  \n  # Script\n    cat(\"\\n Estimaing Model for CCES 2008 \\n\")\n  \n  # Load Data\n   load(\"in/cces2008_rollvote.Rdata\")\n  \n  # Legislator Data\n    rvs <- paste(\"rv\",c(1:9),sep=\"\")\n    ld <- as.matrix(rbind(sen110[,rvs],hou110[,rvs]))\n    \n  # Respondent Data\n    resp <- cces2008[,grep(\"rv|polint_news|pid|ideo\",colnames(cces2008))]\n    s <- apply(resp[,grep(\"polint_news|pid|ideo\",colnames(resp))],1,function(x) !any(is.na(x)))\n    resp_subset <- resp[s,]\n    d <-  resp_subset#[sample(1:nrow(resp_subset),2000),]\n    rd <- as.matrix(d[,1:9])\n  \n  # Covariates\n    interest <- ifelse(d[,\"polint_news\"] ==4,1,0)  # Exposure to public news\n    partisan <- ifelse(d[,\"pid\"] %in% c(1,2,6,7),1,0) # Party identification\n    democrat <- ifelse(d[,\"pid\"] %in% c(1,2),1,0) # Democrats Party identification\n    republican <- ifelse(d[,\"pid\"] %in% c(6,7),1,0) # Republican Party identification\n  \n  # Estimating Model\n    cat(\"\\n First Model \\n\")\n    Z <- model.matrix(~ partisan + interest)\n    res_2008_m1 <- MCMCirtG(Yl = ld,Yc = rd, X = Z,\n                         burnin=Nburin,gibbs = Niter,thin = Nthin,\n                         chains=Nchains,\n                         prior_var_gamma = 100, proposal_var = 0.009)\n\n  \n  # Estimating Model\n    cat(\"\\n Second Model \\n\")\n    Z <- model.matrix(~ partisan*interest)\n    res_2008_m2 <- MCMCirtG(Yl = ld,Yc = rd, X = Z,\n                            burnin=Nburin,gibbs = Niter,thin = Nthin,\n                            chains=Nchains,\n                            prior_var_gamma = 100, proposal_var = 0.009)\n  \n  # Estimating Model\n    cat(\"\\n Third Model \\n\")\n    Z <- model.matrix(~ democrat + republican + interest + interest:democrat +interest:republican)\n    res_2008_m3 <- MCMCirtG(Yl = ld,Yc = rd, X = Z,\n                            burnin=Nburin,gibbs = Niter,thin = Nthin,\n                            chains=Nchains,\n                            prior_var_gamma = 100, proposal_var = 0.009)\n    \n  # Save Results\n    save(res_2008_m1, res_2008_m2, res_2008_m3,file=\"out/smpl/cces2008_girt_models.Rdata\")\n    \n  \n# 2) CCES 10 ========================\n  \n  # Script\n    cat(\"\\n Estimaing Model for CCES 2010 \\n\")\n    \n  # Load Data\n    load(\"in/cces2010_rollvote.Rdata\")\n    \n  # Legislator Data\n    rvs <- paste(\"rv\",c(1:4,6:10),sep=\"\")\n    ld <- as.matrix(rbind(sen111[,rvs],hou111[,rvs]))\n    \n  # Respondent Data\n    resp <- cces2010[,grep(\"rv|polint_news|pid|ideo\",colnames(cces2010))]\n    s <- apply(resp[,grep(\"polint_news|pid|ideo\",colnames(resp))],1,function(x) !any(is.na(x)))\n    resp_subset <- resp[s,]\n    d <-  resp_subset#[sample(1:nrow(resp_subset),2000),]\n    rd <- as.matrix(d[,1:9])\n    \n  # Covariates\n    interest <- ifelse(d[,\"polint_news\"] ==4,1,0)  # Exposure to public news\n    partisan <- ifelse(d[,\"pid\"] %in% c(1,2,6,7),1,0) # Party identification\n    democrat <- ifelse(d[,\"pid\"] %in% c(1,2),1,0) # Democrats Party identification\n    republican <- ifelse(d[,\"pid\"] %in% c(6,7),1,0) # Republican Party identification\n    \n  # Estimating Model\n    cat(\"\\n First Model \\n\")\n    Z <- model.matrix(~ partisan + interest)\n    res_2010_m1 <- MCMCirtG(Yl = ld,Yc = rd, X = Z,\n                            burnin=Nburin,gibbs = Niter,thin = Nthin,\n                            chains=Nchains,\n                            prior_var_gamma = 100, proposal_var = 0.009)\n    \n  # Estimating Model\n    cat(\"\\n Second Model \\n\")\n    Z <- model.matrix(~ partisan*interest)\n    res_2010_m2 <- MCMCirtG(Yl = ld,Yc = rd, X = Z,\n                            burnin=Nburin,gibbs = Niter,thin = Nthin,\n                            chains=Nchains,\n                            prior_var_gamma = 100, proposal_var = 0.009)\n    \n  # Estimating Model\n    cat(\"\\n Third Model \\n\")\n    Z <- model.matrix(~ democrat + republican + interest + interest:democrat +interest:republican)\n    res_2010_m3 <- MCMCirtG(Yl = ld,Yc = rd, X = Z,\n                            burnin=Nburin,gibbs = Niter,thin = Nthin,\n                            chains=Nchains,\n                            prior_var_gamma = 100, proposal_var = 0.009)\n    \n  # Save Results\n    save(res_2010_m1, res_2010_m2,res_2010_m3,file=\"out/smpl/cces2010_girt_models.Rdata\")\n  \n    \n  # Time Track\n  end.time <- Sys.time()\n  time.taken <- end.time - start.time\n  print(time.taken)\n\n",
    "created" : 1562168025673.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2796773479",
    "id" : "C38993F4",
    "lastKnownWriteTime" : 1562168162,
    "last_content_update" : 1562168162942,
    "path" : "~/Documents/Projekte/02_inprep/SpatialBeliefs/Manuscript/JointScal/src/calc/02_CCES_GIRT.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}